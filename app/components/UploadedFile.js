import { RIETextArea } from 'riek'
import React, { Component, PropTypes } from 'react'
import UploadedFile from './UploadedFile';
import $ from 'jquery';

export default React.createClass({

  getInitialState() {
    return {};
  },

  descriptionChanged (value) {
    $.ajax({
      type: 'POST',
      url: '/api/update-file-description',
      data: { 
        description: value.description,
        fileId: this.props.file._id, 
      }
    })
    .done(((res) => {
      if (res.error) {
        this.setState({
          submitDisabled: false,
          errorMessage: res.error || 'Unable to upload file.',
        });
      } else {
        this.setState({
          submitDisabled: false,
          description: res.description
        });
      }
    }).bind(this))
    .fail(function(res) {
      this.setState({
        submitDisabled: false,
        errorMessage: res.error || 'Unable to upload file. Please try again.',
      });
    }.bind(this));
  },

  render () {

    return (
      <li className="file">
        <svg className="docIcon" width="35px" height="47px" viewBox="0 0 35 47" version="1.1">
            <g id="Designs-r2" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
                <g id="B" transform="translate(-362.000000, -883.000000)" fill="#0C62AD">
                    <g id="Group" transform="translate(362.000000, 883.000000)">
                        <polygon id="Fill-1903" points="13.6111111 35.25 7.77777778 35.25 7.77777778 39.1666667 13.6111111 39.1666667"></polygon>
                        <polygon id="Fill-1904" points="27.2222222 35.25 15.5555556 35.25 15.5555556 39.1666667 27.2222222 39.1666667"></polygon>
                        <polygon id="Fill-1905" points="27.2222222 23.5 15.5555556 23.5 15.5555556 27.4166667 27.2222222 27.4166667"></polygon>
                        <polygon id="Fill-1906" points="27.2222222 29.375 15.5555556 29.375 15.5555556 33.2916667 27.2222222 33.2916667"></polygon>
                        <polygon id="Fill-1907" points="13.6111111 23.5 7.77777778 23.5 7.77777778 27.4166667 13.6111111 27.4166667"></polygon>
                        <polygon id="Fill-1908" points="13.6111111 29.375 7.77777778 29.375 7.77777778 33.2916667 13.6111111 33.2916667"></polygon>
                        <polygon id="Fill-1909" points="27.2222222 17.625 15.5555556 17.625 15.5555556 21.5416667 27.2222222 21.5416667"></polygon>
                        <polygon id="Fill-1910" points="13.6111111 17.625 7.77777778 17.625 7.77777778 21.5416667 13.6111111 21.5416667"></polygon>
                        <path d="M22.3611111,12.7291667 L22.3611111,0.979166667 L34.0277778,12.7291667 L22.3611111,12.7291667 Z M29.1666667,41.125 L5.83333333,41.125 L5.83333333,15.6666667 L29.1666667,15.6666667 L29.1666667,41.125 Z M34.7151389,12.0368958 L23.0484722,0.286895833 C22.8656944,0.1028125 22.61875,0 22.3611111,0 L0.972222222,0 C0.435555556,0 0,0.4376875 0,0.979166667 L0,46.0208333 C0,46.5623125 0.435555556,47 0.972222222,47 L34.0277778,47 C34.5644444,47 35,46.5623125 35,46.0208333 L35,12.7291667 C35,12.4687083 34.8969444,12.22 34.7151389,12.0368958 L34.7151389,12.0368958 Z" id="Fill-1911"></path>
                    </g>
                </g>
            </g>
        </svg>
        <svg className="settingsIcon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1">
            <g id="Designs-r2" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
                <g id="B" transform="translate(-912.000000, -373.000000)" fill="#CBCBCB">
                    <g id="Fill-2407" transform="translate(912.000000, 373.000000)">
                        <path d="M10,13.3333333 C8.16208333,13.3333333 6.66666667,11.8379167 6.66666667,10 C6.66666667,8.16208333 8.16208333,6.66666667 10,6.66666667 C11.8379167,6.66666667 13.3333333,8.16208333 13.3333333,10 C13.3333333,11.8379167 11.8379167,13.3333333 10,13.3333333 M19.5833333,8.33333333 L17.2041667,8.33333333 C17.0379167,7.675 16.8254167,6.94416667 16.5558333,6.39041667 L18.2495833,4.69625 C18.3275,4.61833333 18.3716667,4.5125 18.3716667,4.40208333 C18.3716667,4.29125 18.3275,4.18541667 18.2495833,4.10708333 L15.8920833,1.75041667 C15.7291667,1.5875 15.4654167,1.5875 15.3029167,1.75041667 L13.60875,3.44416667 C13.0545833,3.17416667 12.3241667,2.96208333 11.6666667,2.79625 L11.6666667,0.416666667 C11.6666667,0.18625 11.48,0 11.25,0 L8.75,0 C8.52,0 8.33333333,0.18625 8.33333333,0.416666667 L8.33333333,2.79625 C7.675,2.96208333 6.94458333,3.17416667 6.39083333,3.44416667 L4.69625,1.75041667 C4.53375,1.5875 4.27,1.5875 4.10708333,1.75041667 L1.75,4.10708333 C1.5875,4.27 1.5875,4.53375 1.75,4.69625 L3.44416667,6.39083333 C3.17541667,6.94291667 2.9625,7.67416667 2.795,8.33333333 L0.416666667,8.33333333 C0.186666667,8.33333333 0,8.51958333 0,8.75 L0,11.25 C0,11.4804167 0.186666667,11.6666667 0.416666667,11.6666667 L2.795,11.6666667 C2.9625,12.3258333 3.17541667,13.0570833 3.44416667,13.6091667 L1.74958333,15.30375 C1.67166667,15.3816667 1.6275,15.4875 1.6275,15.5979167 C1.6275,15.70875 1.67166667,15.8145833 1.74958333,15.8929167 L4.10708333,18.2495833 C4.26375,18.40625 4.54041667,18.4058333 4.69625,18.2495833 L6.39,16.555 C6.94291667,16.8245833 7.67416667,17.0375 8.33333333,17.2045833 L8.33333333,19.5833333 C8.33333333,19.81375 8.52,20 8.75,20 L11.25,20 C11.48,20 11.6666667,19.81375 11.6666667,19.5833333 L11.6666667,17.2045833 C12.3254167,17.0375 13.0566667,16.8245833 13.60875,16.5558333 L15.3033333,18.2495833 C15.46625,18.4125 15.73,18.4125 15.8929167,18.2495833 L18.2495833,15.8929167 C18.4125,15.73 18.4125,15.46625 18.2495833,15.30375 L16.5558333,13.6091667 C16.8245833,13.0570833 17.0375,12.3254167 17.2045833,11.6666667 L19.5833333,11.6666667 C19.8133333,11.6666667 20,11.4804167 20,11.25 L20,8.75 C20,8.51958333 19.8133333,8.33333333 19.5833333,8.33333333"></path>
                    </g>
                </g>
            </g>
        </svg>
        <p className="docName">{this.props.file.filename}</p>
        <RIETextArea className="description" 
                     value={ this.state.description || this.props.file.description || 'Click to enter a description.'} 
                     change={this.descriptionChanged}
                     propName="description" />
      </li>
    );

  }

});

/*

<li className="file">
							<svg className="docIcon" width="35px" height="47px" viewBox="0 0 35 47" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
							    <g id="Designs-r2" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
							        <g id="B" transform="translate(-362.000000, -883.000000)" fill="#0C62AD">
							            <g id="Group" transform="translate(362.000000, 883.000000)">
							                <polygon id="Fill-1903" points="13.6111111 35.25 7.77777778 35.25 7.77777778 39.1666667 13.6111111 39.1666667"></polygon>
							                <polygon id="Fill-1904" points="27.2222222 35.25 15.5555556 35.25 15.5555556 39.1666667 27.2222222 39.1666667"></polygon>
							                <polygon id="Fill-1905" points="27.2222222 23.5 15.5555556 23.5 15.5555556 27.4166667 27.2222222 27.4166667"></polygon>
							                <polygon id="Fill-1906" points="27.2222222 29.375 15.5555556 29.375 15.5555556 33.2916667 27.2222222 33.2916667"></polygon>
							                <polygon id="Fill-1907" points="13.6111111 23.5 7.77777778 23.5 7.77777778 27.4166667 13.6111111 27.4166667"></polygon>
							                <polygon id="Fill-1908" points="13.6111111 29.375 7.77777778 29.375 7.77777778 33.2916667 13.6111111 33.2916667"></polygon>
							                <polygon id="Fill-1909" points="27.2222222 17.625 15.5555556 17.625 15.5555556 21.5416667 27.2222222 21.5416667"></polygon>
							                <polygon id="Fill-1910" points="13.6111111 17.625 7.77777778 17.625 7.77777778 21.5416667 13.6111111 21.5416667"></polygon>
							                <path d="M22.3611111,12.7291667 L22.3611111,0.979166667 L34.0277778,12.7291667 L22.3611111,12.7291667 Z M29.1666667,41.125 L5.83333333,41.125 L5.83333333,15.6666667 L29.1666667,15.6666667 L29.1666667,41.125 Z M34.7151389,12.0368958 L23.0484722,0.286895833 C22.8656944,0.1028125 22.61875,0 22.3611111,0 L0.972222222,0 C0.435555556,0 0,0.4376875 0,0.979166667 L0,46.0208333 C0,46.5623125 0.435555556,47 0.972222222,47 L34.0277778,47 C34.5644444,47 35,46.5623125 35,46.0208333 L35,12.7291667 C35,12.4687083 34.8969444,12.22 34.7151389,12.0368958 L34.7151389,12.0368958 Z" id="Fill-1911"></path>
							            </g>
							        </g>
							    </g>
							</svg>
							<svg className="settingsIcon" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
							    <g id="Designs-r2" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
							        <g id="B" transform="translate(-912.000000, -373.000000)" fill="#CBCBCB">
							            <g id="Fill-2407" transform="translate(912.000000, 373.000000)">
							                <path d="M10,13.3333333 C8.16208333,13.3333333 6.66666667,11.8379167 6.66666667,10 C6.66666667,8.16208333 8.16208333,6.66666667 10,6.66666667 C11.8379167,6.66666667 13.3333333,8.16208333 13.3333333,10 C13.3333333,11.8379167 11.8379167,13.3333333 10,13.3333333 M19.5833333,8.33333333 L17.2041667,8.33333333 C17.0379167,7.675 16.8254167,6.94416667 16.5558333,6.39041667 L18.2495833,4.69625 C18.3275,4.61833333 18.3716667,4.5125 18.3716667,4.40208333 C18.3716667,4.29125 18.3275,4.18541667 18.2495833,4.10708333 L15.8920833,1.75041667 C15.7291667,1.5875 15.4654167,1.5875 15.3029167,1.75041667 L13.60875,3.44416667 C13.0545833,3.17416667 12.3241667,2.96208333 11.6666667,2.79625 L11.6666667,0.416666667 C11.6666667,0.18625 11.48,0 11.25,0 L8.75,0 C8.52,0 8.33333333,0.18625 8.33333333,0.416666667 L8.33333333,2.79625 C7.675,2.96208333 6.94458333,3.17416667 6.39083333,3.44416667 L4.69625,1.75041667 C4.53375,1.5875 4.27,1.5875 4.10708333,1.75041667 L1.75,4.10708333 C1.5875,4.27 1.5875,4.53375 1.75,4.69625 L3.44416667,6.39083333 C3.17541667,6.94291667 2.9625,7.67416667 2.795,8.33333333 L0.416666667,8.33333333 C0.186666667,8.33333333 0,8.51958333 0,8.75 L0,11.25 C0,11.4804167 0.186666667,11.6666667 0.416666667,11.6666667 L2.795,11.6666667 C2.9625,12.3258333 3.17541667,13.0570833 3.44416667,13.6091667 L1.74958333,15.30375 C1.67166667,15.3816667 1.6275,15.4875 1.6275,15.5979167 C1.6275,15.70875 1.67166667,15.8145833 1.74958333,15.8929167 L4.10708333,18.2495833 C4.26375,18.40625 4.54041667,18.4058333 4.69625,18.2495833 L6.39,16.555 C6.94291667,16.8245833 7.67416667,17.0375 8.33333333,17.2045833 L8.33333333,19.5833333 C8.33333333,19.81375 8.52,20 8.75,20 L11.25,20 C11.48,20 11.6666667,19.81375 11.6666667,19.5833333 L11.6666667,17.2045833 C12.3254167,17.0375 13.0566667,16.8245833 13.60875,16.5558333 L15.3033333,18.2495833 C15.46625,18.4125 15.73,18.4125 15.8929167,18.2495833 L18.2495833,15.8929167 C18.4125,15.73 18.4125,15.46625 18.2495833,15.30375 L16.5558333,13.6091667 C16.8245833,13.0570833 17.0375,12.3254167 17.2045833,11.6666667 L19.5833333,11.6666667 C19.8133333,11.6666667 20,11.4804167 20,11.25 L20,8.75 C20,8.51958333 19.8133333,8.33333333 19.5833333,8.33333333"></path>
							            </g>
							        </g>
							    </g>
							</svg>
							<p className="docName">important_data_2016.xml</p>
							<textarea rows="4" placeholder="Please add a description of the fileâ€™s contents and proposed benefit to the dotBC project."></textarea>
						</li>

*/